.\"                                      Hey, EMACS: -*- nroff -*-
.\" First parameter, NAME, should be all caps
.\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
.\" other parameters are allowed: see man(7), man(1)
.TH DS-REPLCHECK 1 "Feb 14, 2018"
.\" Please adjust this date whenever revising the manpage.
.\"
.\" Some roff macros, for reference:
.\" .nh        disable hyphenation
.\" .hy        enable hyphenation
.\" .ad l      left justify
.\" .ad b      justify to both left and right margins
.\" .nf        disable filling
.\" .fi        enable filling
.\" .br        insert line break
.\" .sp <n>    insert n+1 empty lines
.\" for manpage-specific macros, see man(7)
.SH NAME 
ds-replcheck - Performs replication synchronization report between two replicas

.SH SYNOPSIS
ds-replcheck [-h] [-o FILE] [-D BINDDN] [[-w BINDPW] [-W]] [-m MURL]
             [-r RURL] [-b SUFFIX] [-l LAG] [-Z CERTDIR]
             [-i IGNORE] [-p PAGESIZE] [-M MLDIF] [-R RLDIF]

.SH DESCRIPTION
ds-replcheck has two operating modes: offline - which compares two LDIF files (generated by db2ldif -r), and online mode - which queries each server to gather the entries for comparisions.  The tool reports on missing entries, entry inconsistencies, tombstones, conflict entries, database RUVs, and entry counts.

.SH OPTIONS

A summary of options is included below:

.TP
.B \fB\-h\fR
.br
Display usage
.TP
.B \fB\-D\fR \fIRoot DN\fR
The Directory Manager DN, or root DN.a (online mode)
.TP
.B \fB\-w\fR \fIPASSWORD\fR
The Directory Manager password (online mode)
.TP
.B \fB\-W\fR
.br
Prompt for the Directory Manager password (online mode)
.TP
.B \fB\-m\fR \fILDAP_URL\fR
The LDAP Url for the first replica (online mode)
.TP
.B \fB\-r\fR \fILDAP URL\fR
The LDAP Url for the the second replica (online mode)
.TP
.B \fB\-b\fR \fISUFFIX\fR
The replication suffix.  (online & offline)
.TP
.B \fB\-l\fR \fILag time\fR
If an inconsistency is detected, and it is within this lag allowance it will *NOT* be reported.  (online mode)
.TP
.B \fB\-Z\fR \fICERT DIR\fR
The directory containing a certificate database for StartTLS/SSL connections.  (online mode)
.TP
.B \fB\-i\fR \fIIGNORE LIST\fR
Comma separated list of attributes to ignore in the report  (online & offline)
.TP
.B \fB\-c\fR
.br
Display verbose conflict entry information
.TP
.B \fB\-M\fR \fILDIF FILE\fR
The LDIF file for the first replica  (offline mode)
.TP
.B \fB\-R\fR \fILDIF FILE\fR
The LDIF file for the second replica  (offline mode)
.TP
.B \fB\-p\fR \fIPAGE SIZE\fR
The page size used for the paged result searches that the tool performs.  The default is 500.  (online mode)
.TP
.B \fB\-o\fR \fIOUTPUT FILE\fR
The file to write the report to.  (online and offline)

.SH EXAMPLE
ds-replcheck -D "cn=directory manager" -w PASSWORD -m ldap://myhost.domain.com:389 -r ldap://otherhost.domain.com:389 -b "dc=example,dc=com" -Z /etc/dirsrv/slapd-myinstance

ds-replcheck -b dc=example,dc=com -M /tmp/replicaA.ldif -R /tmp/replicaB.ldif

.SH AUTHOR
ds-replcheck was written by the 389 Project.
.SH "REPORTING BUGS"
Report bugs to https://pagure.io/389-ds-base/new_issue
.SH COPYRIGHT
Copyright \(co 2018 Red Hat, Inc.

