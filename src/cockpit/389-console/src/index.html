<!DOCTYPE html>
<html lang="en">
<head>
  <title>389 Directory Server</title>
  <meta charset="utf-8">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script type="text/javascript" src="../base1/cockpit.js"></script>
  <script src="static/jquery-3.3.1.min.js"></script>
  <script src="static/jquery.dataTables.min.js"></script>
  <script src="static/jquery.dataTables.select.min.js"></script>
  <script src="static/moment.min.js"></script>
  <script src="static/dataTables.datetime-moment.js"></script>
  <script src="static/jquery.timepicker.min.js"></script>
  <script src="static/bootstrap.min.js"></script>
  <script src="static/bootpopup.min.js"></script>
  <script src="static/patternfly.min.js"></script>
  <script src="static/c3.min.js"></script>
  <script src="static/d3.min.js"></script>
  <script src="ds.js"></script>
  <script src="schema.js"></script>
  <script src="servers.js"></script>
  <link href="static/bootstrap.min.css" rel="stylesheet">
  <link href="static/jquery.dataTables.min.css" type="text/css" rel="stylesheet">
  <link href="static/jquery.timepicker.min.css" type="text/css" rel="stylesheet">
  <link href="static/style.min.css" rel="stylesheet">
  <link href="static/patternfly-additions.css" rel="stylesheet" type="text/css">
  <link href="static/Typeahead.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="../base1/patternfly.css">
  <link href="css/ds.css" type="text/css" rel="stylesheet">
</head>

<body>
  <div id="reload-page" hidden></div>
  <div id="loading-page" class="ds-center ds-loading" hidden>
    <h4 id="loading-msg">Loading Directory Server Configuration...</h4>
    <p class="ds-margin-top-lg"><span class="spinner spinner-lg spinner-inline"></span></p>

    <div class="progress ds-margin-top-lg">
        <div class="progress-bar" role="progressbar" id="ds-progress-bar"
            aria-valuenow="20" aria-valuemin="0"
            aria-valuemax="100" style="width: 20%;"
        >
            <span id="ds-progress-label">20%</span>
        </div>
    </div>

  </div>
  <div id="everything" hidden>
    <div class="ds-nav-bar">
      <div class="ds-logo">
        <h2 class="ds-logo-style" id="main-banner"></h2>
      </div>

      <nav class="navbar navbar-default" id="ds-navigation" role="navigation">
        <div class="collapse navbar-collapse navbar-collapse-5 ds-nav">
          <ul class="nav navbar-nav navbar-primary">

            <!-- Server Config navtab -->
            <li class="dropdown ds-nav-tab">
              <a href="#0" class="ds-tab-list" data-toggle="dropdown" id="server-tab">
                Server Settings
                <b class="caret"></b>
              </a>
              <ul class="dropdown-menu dropup ds-nav-item">
                <li><a href="#0" class="ds-nav-choice" id="server-config-btn" parent-id="server-tab">Server Configuration</a></li>
                <li><a href="#0" class="ds-nav-choice" id="server-tuning-btn" parent-id="server-tab">Tuning & Limits</a></li>
                <li><a href="#0" class="ds-nav-choice" id="server-sasl-btn"   parent-id="server-tab">SASL</a></li>
                <li class="dropdown-submenu">
                  <a tabindex="-1" href="#0">Password Policy</a>
                  <ul class="dropdown-menu">
                    <li><a href="#0" class="ds-nav-choice" id="server-gbl-pwp-btn"   parent-id="server-tab">Global Password Policy</a></li>
                    <li><a href="#0" class="ds-nav-choice" id="server-local-pwp-btn" parent-id="server-tab">Local Password Policy</a></li>
                  </ul>
                </li>
                <li><a href="#0" class="ds-nav-choice" id="server-ldapi-btn" parent-id="server-tab">LDAPI & Autobind</a></li>
                <li class="dropdown-submenu">
                  <a tabindex="-1" href="#0">Logging</a>
                  <ul class="dropdown-menu">
                    <li><a href="#0" class="ds-nav-choice" id="server-log-access-btn"    parent-id="server-tab">Access Log</a></li>
                    <li><a href="#0" class="ds-nav-choice" id="server-log-audit-btn"     parent-id="server-tab">Audit Log</a></li>
                    <li><a href="#0" class="ds-nav-choice" id="server-log-auditfail-btn" parent-id="server-tab">Audit Failure Log</a></li>
                    <li><a href="#0" class="ds-nav-choice" id="server-log-errors-btn"    parent-id="server-tab">Errors Log</a></li>
                  </ul>
                </li>
              </ul>
            </li>

            <!-- Security navtab -->
            <li class="ds-nav-tab">
              <a href="#0" class="ds-tab-list ds-tab-standalone" id="security-tab">
                Security
              </a>
            </li>

            <!-- Database navtab -->
            <li class="ds-nav-tab">
              <a href="#0" class="ds-tab-list ds-tab-standalone" id="database-tab">
                Database
              </a>
            </li>

            <!-- Replication navtab -->
            <li class="ds-nav-tab">
                <a href="#0" class="ds-tab-list ds-tab-standalone" id="replication-tab">
                    Replication
                </a>
            </li>

            <!-- Schema navtab -->
            <li class="dropdown ds-nav-tab">
              <a href="#0" class="ds-tab-list" data-toggle="dropdown" id="schema-tab">
                Schema
                <b class="caret"></b>
              </a>
              <ul class="dropdown-menu ds-nav-item">
                <li><a href="#0"class="ds-nav-choice" id="objectclass-btn" parent-id="schema-tab">Objectclasses</a></li>
                <li><a href="#0"class="ds-nav-choice" id="attribute-btn" parent-id="schema-tab">Attributes</a></li>
                <li><a href="#0" class="ds-nav-choice" id="schema-mr-btn" parent-id="schema-tab">Matching Rules</a></li>
              </ul>
            </li>

            <!-- Plugins navtab -->
            <li class="ds-nav-tab">
              <a href="#0" class="ds-tab-list ds-tab-standalone" id="plugin-tab">
                Plugins
              </a>
            </li>

            <!-- Monitoring navtab -->
            <li class="ds-nav-tab">
              <a href="#0" class="ds-tab-list ds-tab-standalone"id="monitor-tab">
                Monitoring
              </a>
            </li>
          </ul>
        </div>
      </nav>
    </div>


    <!-- -------------------------------------
    popup modals from any action dropdown, or right-click option need to be defined here
    ---------------------------------------- -->

    <div class="modal fade" id="success-form" tabindex="-1" role="dialog" aria-labelledby="success-label" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content ds-popup">
          <div class="modal-header">
             <h4 class="modal-title" id="success-label">Success!</h4>
          </div>
          <div class="modal-body">
            <p id="success-msg"><p>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="restart-instance-form" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="restart-inst-label" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content ds-modal">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true" aria-label="Close">
              <span class="pficon pficon-close"></span>
            </button>
            <h4 class="modal-title" id="restart-inst-label">Restart Instance</h4>
          </div>
          <div class="modal-body">
            <div id="reload-spinner" class="ds-center">
              <p></p>
              <p id="ds-restart-inst"><span class="spinner spinner-xs spinner-inline"></span> Restarting instance...</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="stop-instance-form" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="stop-inst-label" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content ds-modal">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true" aria-label="Close">
              <span class="pficon pficon-close"></span>
            </button>
            <h4 class="modal-title" id="stop-inst-label">Stop Instance</h4>
          </div>
          <div class="modal-body">
            <div id="reload-spinner" class="ds-center">
              <p></p>
              <p id="ds-stop-inst"><span class="spinner spinner-xs spinner-inline"></span> Stopping instance...</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="start-instance-form" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="start-inst-label" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content ds-modal">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true" aria-label="Close">
              <span class="pficon pficon-close"></span>
            </button>
            <h4 class="modal-title" id="start-inst-label">Start Instance</h4>
          </div>
          <div class="modal-body">
            <div id="reload-spinner" class="ds-center">
              <p></p>
              <p id="ds-start-inst"><span class="spinner spinner-xs spinner-inline"></span> Starting instance...</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="remove-instance-form" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="remove-inst-label" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content ds-modal">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true" aria-label="Close">
              <span class="pficon pficon-close"></span>
            </button>
            <h4 class="modal-title" id="remove-inst-label">Remove Instance</h4>
          </div>
          <div class="modal-body">
            <div id="reload-spinner" class="ds-center">
              <p></p>
              <p id="ds-remove-inst"><span class="spinner spinner-xs spinner-inline"></span> Removing instance...</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="schema-reload-form" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="reload-label" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content ds-modal">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true" aria-label="Close">
              <span class="pficon pficon-close"></span>
            </button>
            <h4 class="modal-title" id="reload-label">Reload Schema Files</h4>
          </div>
          <div class="modal-body">
            <form class="form-horizontal">
              <label for="reload-dir" class="ds-config-label" title="The name of the database link.">Schema File Directory:</label><input
                class="ds-input-auto" size="40" type="text" placeholder="Leave empty to use default schema location" id="reload-dir">
            </form>
            <div id="reload-spinner" class="ds-center" hidden>
              <p></p>
              <p><span class="spinner spinner-xs spinner-inline"></span> Reloading schema files...</p>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-primary" id ="schema-reload-btn">Reload Schema</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Manage Backups/restore -->
    <div class="modal fade" id="restore-form" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="restore-label" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true" aria-label="Close">
              <span class="pficon pficon-close"></span>
            </button>
            <h4 class="modal-title" id="restore-label">Restore Directory Server</h4>
          </div>
          <div class="modal-body">
            <form class="form-horizontal">
              <table id="backup-table" class="display ds-repl-table" cellspacing="0" width="100%">
                <thead>
                  <tr class="ds-table-header">
                    <th>Backup Name</th>
                    <th>Date</th>
                    <th>Size</th>
                    <th>Restore</th>
                    <th>Delete</th>
                  </tr>
                </thead>
                <tbody id="restore-tbody">
                </tbody>
              </table>
            </form>
            <div id="restore-spinner" class="ds-center" hidden>
              <p></p>
              <p><span class="spinner spinner-xs spinner-inline"></span> Restoring the server...</p>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Create database link -->
    <div class="modal fade" id="create-db-link-form" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="dblink-label" aria-hidden="true">
      <div class="modal-dialog ds-modal">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true" aria-label="Close">
              <span class="pficon pficon-close"></span>
            </button>
            <h4 class="modal-title" id="dblink-label">Create Database Link</h4>
          </div>
          <div class="modal-body">
            <form class="form-horizontal">
              <div class="ds-container">
                <div class="ds-inline">
                  <div>
                    <label for="chaining-name" class="ds-config-label" title="The name of the database link.">Database Link Name</label><input
                      class="ds-dblink-form-input" type="text" placeholder="Bind DN" id="chaining-name" name="name">
                  </div>
                  <div>
                    <label for="create-nsfarmserverurl" class="ds-config-label" title=
                      "The URL for the remote server.  Add additional failure servers URLs separated by a space. (nsfarmserverurl)">
                      Remote Server URL(s)</label><input class="ds-dblink-form-input" type="text" id="create-nsfarmserverurl"/>
                  </div>
                  <div>
                    <label for="create-nsmultiplexorbinddn" class="ds-config-label" title="Bind DN used to authenticate against the remote server (nsmultiplexorbinddn).">Remote Server Bind DN</label><input
                      class="ds-dblink-form-input" type="text" autocomplete="username" placeholder="Bind DN" id="create-nsmultiplexorbinddn" name="name">
                  </div>
                  <div>
                    <label for="create-nsmultiplexorcredentials" class="ds-config-label" title="Replication Bind DN (nsDS5ReplicaCredentials).">Bind DN Credentials</label><input
                      class="ds-dblink-form-input" type="password" autocomplete="new-password" placeholder="Enter password" id="create-nsmultiplexorcredentials" name="name">
                  </div>
                  <div>
                    <label for="create-nsmultiplexorcredentials-confirm" class="ds-config-label" title="Confirm password">Confirm Password</label><input
                      class="ds-dblink-form-input" type="password" autocomplete="new-password" placeholder="Confirm password" id="create-nsmultiplexorcredentials-confirm" name="name">
                  </div>
                  <div>
                    <label for="dblink-conn" class="ds-config-label" title="The connection protocol for the remote server.">Connection Protocol</label><select
                      class="btn btn-default dropdown ds-dblink-dropdown" id="dblink-conn">
                        <option>LDAP</option>
                        <option>LDAPS</option>
                        <option>Start TLS</option>
                      </select>
                  </div>
                  <div>
                    <label for="nsbindmechanism" class="ds-config-label" title="The bind method for contacting the remote server  (nsbindmechanism).">Bind Method</label><select
                      class="btn btn-default dropdown ds-dblink-dropdown" id="nsbindmechanism">
                        <option>Simple</option>
                        <option>SASL/DIGEST-MD5</option>
                        <option>SASL/GSSAPI</option>
                      </select>
                  </div>
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-primary" id="chaining-save">Create Link</button>
          </div>
        </div>
      </div>
    </div>

    <!--
        Create New Instance
    -->
    <div class="modal fade" id="create-inst-form" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="create-inst-header" aria-hidden="true">
      <div class="modal-dialog ds-modal">
        <div class="modal-content animate">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true" aria-label="Close">
              <span class="pficon pficon-close"></span>
            </button>
            <h4 class="modal-title ds-center" id="create-inst-header">Create New Server Instance</h4>
          </div>
          <div class="modal-body">
            <form class="form-horizontal">
              <p class="ds-modal-error"></p>
              <div class="ds-inline">
                <div>
                  <label for="create-inst-serverid" class="ds-config-label ds-input-right" title="The instance name, this is what gets appended to 'slapi-'.  The instance name can only contain letters, numbers, and:  # % : - _">
                    Instance Name</label><input class="ds-input ds-inst-input ds-left-margin" size="40" type="text" id="create-inst-serverid" placeholder="Your_Instance_Name" required />
                </div>
                <div>
                  <label for="create-inst-port" class="ds-config-label ds-input-right" title="The server port number">
                    Port</label><input class="ds-input ds-inst-input ds-left-margin" size="40" type="text" value="389" id="create-inst-port" required />
                </div>
                <div>
                  <label for="create-inst-secureport" class="ds-config-label ds-input-right" title="The secure port number for TLS connections">
                    Secure Port</label><input class="ds-input ds-inst-input ds-left-margin" size="40" type="text" value="636" id="create-inst-secureport" required />
                </div>
                <div class="ds-inst-indent">
                  <input type="checkbox" class="ds-config-checkbox" id="create-inst-tls" checked><label
                    for="create-inst-tls" class="ds-label" title="Create a self-signed certificate database">Create Self-Signed TLS Certificate DB</label>
                </div>
                <div>
                  <label for="create-inst-rootdn" class="ds-config-label ds-input-right" title="The DN for the unrestricted  user">
                    Directory Manager DN</label><input class="ds-input ds-inst-input ds-left-margin" size="40" autocomplete="username" value="cn=Directory Manager" type="text" id="create-inst-rootdn" required />
                </div>
                <div>
                  <label for="rootdn-pw" class="ds-config-label ds-input-right" title="Directory Manager password.">Directory Manager Password</label><input
                    class="ds-input ds-inst-input ds-left-margin" size="40" type="password" autocomplete="new-password" placeholder="Enter password" id="rootdn-pw" name="name" required>
                </div>
                <div>
                  <label for="rootdn-pw-confirm" class="ds-config-label ds-input-right" title="Confirm password">Confirm Password</label><input
                    class="ds-input ds-inst-input ds-left-margin" size="40" type="password" autocomplete="new-password" placeholder="Confirm password" id="rootdn-pw-confirm" name="name" required>
                </div>
                <hr>
                <h5 class="ds-center">Optional Database Settings</h5>
                <div>
                  <label for="backend-suffix" class="ds-config-label ds-input-right" title="Database suffix, like 'dc=example,dc=com'.  The suffix must be a valid LDAP Distiguished Name (DN)">Database Suffix</label><input
                    class="ds-input ds-inst-input ds-left-margin" size="40" placeholder="e.g. dc=example,dc=com" type="text" id="backend-suffix">
                </div>
                <div>
                  <label for="backend-name" class="ds-config-label ds-input-right" title="The name for the backend database, like 'userroot'.  The name can be a combination of alphanumeric characters, dashes (-), and underscores (_). No other characters are allowed, and the name must be unique across all backends.">Database Name</label><input
                    class="ds-input ds-inst-input ds-left-margin" placeholder="e.g. userRoot" size="40" type="text" id="backend-name">
                </div>
                <div class="ds-inst-indent ds-margin-top">
                    <div>
                        <input type="radio" name="ds-radio-group" id="no-init" checked /><label class="ds-left-margin" for="no-init"
                            title="Do not initialize the backend database"> Do Not Initialize Database</label>
                    </div>
                    <div>
                        <input type="radio" name="ds-radio-group" id="create-suffix-entry" /><label class="ds-left-margin" for="create-suffix-entry"
                            title="Create the suffix entry with a basic READ ACI"> Create Suffix Entry</label>
                    </div>
                    <div>
                      <input type="radio" name="ds-radio-group" id="create-sample-entries" /><label class="ds-left-margin" for="create-sample-entries"
                          title="Create sample entries under the suffix"> Create Suffix Entry And Add Sample Entries</label>
                    </div>
                </div>
                <div id="create-inst-spinner" class="ds-center" hidden>
                  <hr>
                  <p><span class="spinner spinner-xs spinner-inline"></span> Creating instance...</p>
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-primary" id="create-inst-save">Create Instance</button>
          </div>
        </div>
      </div>
    </div>

    <!--
        Do Backup
    -->
    <div class="modal fade" id="backup-form" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="backup-label" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true" aria-label="Close">
              <span class="pficon pficon-close"></span>
            </button>
            <h4 class="modal-title" id="backup-label">Backup Directory Server</h4>
          </div>
          <div class="modal-body">
            <form class="form-horizontal">
                <label for="backup-name" title="Enter a name for the backup subdirectory located under the server's backup directory (nsslapd-bakdir)">
                  Name For The Backup</label><input class="ds-input-auto" type="text" id="backup-name"/>
            </form>
            <div id="backup-spinner" class="ds-center" hidden>
              <p></p>
              <p><span class="spinner spinner-xs spinner-inline"></span> Backing up the server...</p>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-primary" id="ds-backup-btn">Do Backup</button>
          </div>
        </div>
      </div>
    </div>

    <!-- The Nav Tabs  -->

    <div class="ds-content">
      <div id="no-package" class="all-pages ds-center" hidden>
        <h3>There is no <b>389-ds-base</b> package installed on this system.  Sorry there is nothing to manage...</h3>
      </div>
      <div id="no-instances" class="all-pages ds-center" hidden>
        <h3>There are no Directory Server instances to manage</h3>
        <p>
          <button type="button" class="btn btn-primary" id="no-inst-create-btn" data-toggle="modal" data-target="#create-inst-form">Create New Instance</button>
        </p>
      </div>
      <div id="not-running" class="all-pages ds-center" hidden>
        <h3>This server instance is not running, either start it from the <b>Actions</b> dropdown menu, or choose a different instance</h3>
      </div>
      <div id="no-connect" class="all-pages ds-center" hidden>
        <h3>This server instance is running, but we can not connect to it.  Check LDAPI is properly configured on this instance.</h3>
      </div>

      <div id="server-content" class="all-pages" hidden>
          <div id="server-settings"></div>
          <div id="server-tuning"></div>
          <div id="server-sasl"></div>
          <div id="server-pwp"></div>
          <div id="server-ldapi"></div>
          <div id="server-logs"></div>
      </div>

      <div id="security-content" class="all-pages" hidden>
          <div id="security"></div>
      </div>

      <div id="database-content" class="all-pages" hidden>
        <div id="database"></div>
      </div>

      <div id="replication-content" class="all-pages" hidden>
          <div id="replication"></div>
      </div>

      <div id="schema-content" class="all-pages" hidden>
      </div>

      <div id="plugin-content" class="all-pages" hidden>
        <div id="plugins"></div>
      </div>

      <div id="monitor-content" class="all-pages" hidden>
          <div id="monitor"></div>
      </div>

    </div>

  </div>
  <script src="index.js"></script>
</body>
</html>
